#!/bin/bash\n# Unlink test project from Cortex system\n\nproject_name=\"$1\"\ncortex_path=\"/Users/simonjanke/Projects/cortex\"\nframework_path=\"/Users/simonjanke/Projects/cortex-test-framework\"\n\necho \"ðŸ”— Unlinking test project '$project_name' from Cortex system\"\n\n# Remove link from Cortex State-Management\nif [ -f \"$cortex_path/State-Management.md\" ]; then\n    echo \"  ðŸ“„ Removing link from Cortex State-Management\"\n    \n    # Create backup\n    cp \"$cortex_path/State-Management.md\" \"$cortex_path/State-Management.md.backup-$(date +%Y%m%d_%H%M%S)\"\n    \n    # Remove project line\n    grep -v \"$project_name\" \"$cortex_path/State-Management.md\" > \"$cortex_path/State-Management.md.tmp\"\n    mv \"$cortex_path/State-Management.md.tmp\" \"$cortex_path/State-Management.md\"\n    \n    echo \"  âœ… Link removed from State-Management.md\"\nfi\n\n# Remove from Test Framework Integration if it exists\nif [ -f \"$cortex_path/06-Monitoring/Test-Framework-Integration.md\" ]; then\n    echo \"  ðŸ“Š Updating Test Framework Integration\"\n    \n    # Create backup\n    cp \"$cortex_path/06-Monitoring/Test-Framework-Integration.md\" \"$cortex_path/06-Monitoring/Test-Framework-Integration.md.backup-$(date +%Y%m%d_%H%M%S)\"\n    \n    # Update status to archived\n    sed -i '' \"s/- \\[\\[cortex-test-framework:\\/test-projects\\/$project_name|$project_name\\]\\] - Created:/- **$project_name** - Archived: $(date -Iseconds) - Was:/\" \"$cortex_path/06-Monitoring/Test-Framework-Integration.md\"\n    \n    echo \"  âœ… Test Framework Integration updated\"\nfi\n\n# Remove service notification\nif [ -f \"$cortex_path/00-System/Services/data/test-project-$project_name.json\" ]; then\n    echo \"  ðŸ“Š Removing service notification\"\n    \n    # Update status to archived before removal\n    jq '.status = \"archived\" | .archived_date = \"'$(date -Iseconds)'\"' \"$cortex_path/00-System/Services/data/test-project-$project_name.json\" > \"$cortex_path/00-System/Services/data/test-project-$project_name-archived.json\"\n    \n    # Remove active notification\n    rm \"$cortex_path/00-System/Services/data/test-project-$project_name.json\"\n    \n    echo \"  âœ… Service notification archived and removed\"\nfi\n\n# Create final integration summary\nif [ -d \"$cortex_path/06-Monitoring\" ]; then\n    cat >> \"$cortex_path/06-Monitoring/Test-Project-Archive-Log.md\" << EOF\n\n## $project_name - $(date -Iseconds)\n- **Status**: Archived and unlinked\n- **Archive Location**: [[cortex-test-framework:/test-results/archived/]]\n- **Test Results**: Available in archive\n- **Integration**: Successfully completed\n\nEOF\nfi\n\necho \"âœ… Test project '$project_name' successfully unlinked from Cortex\"\necho \"ðŸ—„ï¸  Project archived and references updated\"\necho \"ðŸ“Š Service integration cleanly removed\"\n