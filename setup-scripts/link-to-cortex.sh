#!/bin/bash\n# Link test project to Cortex system\n\nproject_name=\"$1\"\ncortex_path=\"/Users/simonjanke/Projects/cortex\"\nframework_path=\"/Users/simonjanke/Projects/cortex-test-framework\"\ntest_project_path=\"$framework_path/test-projects/$project_name\"\n\necho \"🔗 Linking test project '$project_name' to Cortex system\"\n\n# Create link in Cortex State-Management\nif [ -f \"$cortex_path/State-Management.md\" ]; then\n    echo \"  📄 Updating Cortex State-Management with test project link\"\n    \n    # Check if test framework section exists\n    if ! grep -q \"## 🧪 Test Framework Integration\" \"$cortex_path/State-Management.md\"; then\n        echo \"\" >> \"$cortex_path/State-Management.md\"\n        echo \"## 🧪 Test Framework Integration\" >> \"$cortex_path/State-Management.md\"\n        echo \"\" >> \"$cortex_path/State-Management.md\"\n        echo \"### Active Test Projects\" >> \"$cortex_path/State-Management.md\"\n        echo \"\" >> \"$cortex_path/State-Management.md\"\n    fi\n    \n    # Add project link if not already present\n    if ! grep -q \"$project_name\" \"$cortex_path/State-Management.md\"; then\n        echo \"- [[cortex-test-framework:/test-projects/$project_name|$project_name]] - Created: $(date -Iseconds)\" >> \"$cortex_path/State-Management.md\"\n        echo \"  ✅ Link added to State-Management.md\"\n    else\n        echo \"  ✅ Link already exists in State-Management.md\"\n    fi\nelse\n    echo \"  ⚠️  State-Management.md not found, creating test project tracking\"\n    mkdir -p \"$cortex_path/06-Monitoring\"\n    cat > \"$cortex_path/06-Monitoring/Test-Framework-Integration.md\" << EOF\n# 🧪 Test Framework Integration\n\n*Tracking active test projects and their results*\n\n## Active Test Projects\n\n- [[cortex-test-framework:/test-projects/$project_name|$project_name]] - Created: $(date -Iseconds)\n\n## Recent Test Results\n\n### $project_name\n- Status: Active\n- Type: Template/Workflow Testing\n- Results: [[cortex-test-framework:/test-results/]]\n\n---\n*Updated: $(date -Iseconds)*\nEOF\nfi\n\n# Create reverse link in test project\ncat > \"$test_project_path/cortex-link.md\" << EOF\n# 🔗 Cortex Integration Link\n\n*Connection to main Cortex system*\n\n## Cortex System Integration\n\n**Main Cortex System**: [[file:///Users/simonjanke/Projects/cortex|Cortex v2.0]]\n**State Management**: [[file:///Users/simonjanke/Projects/cortex/State-Management.md|Current State]]\n**Decision Records**: [[file:///Users/simonjanke/Projects/cortex/03-Decisions|ADR Repository]]\n\n## Test Project Info\n\n**Project**: $project_name\n**Created**: $(date -Iseconds)\n**Type**: Template/Workflow Testing\n**Status**: Active\n\n## Integration Points\n\n### Results Flow\n- Test results from this project feed back into Cortex decision confidence\n- Template validation results update production templates\n- Performance benchmarks influence architecture decisions\n\n### Data Sources\n- Templates copied from: [[file:///Users/simonjanke/Projects/cortex/00-Templates|Cortex Templates]]\n- Algorithms tested: [[file:///Users/simonjanke/Projects/cortex/00-System/Algorithms|Cortex Algorithms]]\n- Patterns validated: [[file:///Users/simonjanke/Projects/cortex/05-Insights|Cortex Insights]]\n\n---\n*Auto-generated link | Test Framework v1.0*\nEOF\n\n# Create notification in Cortex Learning Service\nif [ -d \"$cortex_path/00-System/Services/data\" ]; then\n    cat > \"$cortex_path/00-System/Services/data/test-project-$project_name.json\" << EOF\n{\n  \"project_name\": \"$project_name\",\n  \"status\": \"active\",\n  \"created\": \"$(date -Iseconds)\",\n  \"type\": \"test_project\",\n  \"path\": \"$test_project_path\",\n  \"cortex_integration\": true,\n  \"auto_update_results\": true\n}\nEOF\n    echo \"  📊 Service notification created\"\nfi\n\necho \"✅ Test project '$project_name' successfully linked to Cortex\"\necho \"🔗 Bi-directional links established\"\necho \"📊 Service integration configured\"\n